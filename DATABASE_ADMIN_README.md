# База данных и Админ панель - Документация

## Созданные компоненты

### 1. База данных (database.js)
Симуляция базы данных с использованием `localStorage`.

**Тестовые пользователи:**
- **Администратор:**
  - Email: `admin@restaurant.ru`
  - Пароль: `admin123`
  
- **Пользователь:**
  - Email: `user@example.ru`
  - Пароль: `user123`

### 2. Админ панель (AdminPanel.js)
Панель управления для администраторов.

**Разделы:**
- **Статистика** - общая выручка, количество заказов и броней
- **Заказы** - список всех заказов с возможностью изменения статуса
- **Брони** - список всех бронирований с управлением статусами
- **Пользователи** - список зарегистрированных пользователей

### 3. Обновленная система авторизации
- Вход с проверкой в базе данных
- Регистрация новых пользователей
- Автоматический переход в админ панель для администраторов

## Функции базы данных

### Пользователи
- `getUsers()` - получить всех пользователей
- `getUserByEmail(email)` - найти пользователя по email
- `addUser(userData)` - добавить нового пользователя
- `login(email, password)` - вход в систему
- `logout()` - выход из системы
- `getCurrentUser()` - получить текущего пользователя

### Заказы
- `getOrders()` - получить все заказы
- `addOrder(orderData)` - добавить новый заказ
- `updateOrderStatus(orderId, status)` - обновить статус заказа

### Брони
- `getReservations()` - получить все брони
- `addReservation(reservationData)` - добавить новую бронь
- `updateReservationStatus(reservationId, status)` - обновить статус брони

### Статистика
- `getStatistics()` - получить статистику по выручке, заказам и броням

## Статусы

### Заказы
- `new` - Новый
- `processing` - В обработке
- `delivering` - Доставляется
- `completed` - Завершен
- `cancelled` - Отменен

### Брони
- `pending` - Ожидает
- `confirmed` - Подтверждена
- `completed` - Завершена
- `cancelled` - Отменена

## Как использовать

### Для администратора:
1. Нажмите "Войти" в навигации
2. Введите данные администратора:
   - Email: `admin@restaurant.ru`
   - Пароль: `admin123`
3. После входа автоматически откроется админ панель
4. В навигации появится пункт "Админ панель" для быстрого доступа

### Для пользователя:
1. Зарегистрируйтесь или войдите как обычный пользователь
2. После входа в навигации отображается ваше имя
3. Кнопка "Выйти" для выхода из системы

## Структура данных

### Пользователь
```javascript
{
  id: 1,
  email: 'user@example.ru',
  password: 'password',
  name: 'Имя Фамилия',
  role: 'admin' | 'user',
  phone: '+7 (999) 123-45-67'
}
```

### Заказ
```javascript
{
  id: 1234567890,
  date: '2024-01-01T12:00:00.000Z',
  status: 'new',
  customerName: 'Иван Иванов',
  total: 2500,
  items: [...],
  ...orderData
}
```

### Бронь
```javascript
{
  id: 1234567890,
  createdAt: '2024-01-01T12:00:00.000Z',
  status: 'pending',
  date: '2024-01-10',
  time: '19:00',
  guests: 4,
  name: 'Иван Иванов',
  phone: '+7 (999) 123-45-67'
}
```

## Хранилище данных

Все данные хранятся в `localStorage`:
- `users` - массив пользователей
- `orders` - массив заказов
- `reservations` - массив броней
- `currentUser` - текущий авторизованный пользователь

## Безопасность

**Внимание:** Это демо-версия для разработки. В production:
- Используйте настоящую БД (MySQL, PostgreSQL, MongoDB)
- Хешируйте пароли (bcrypt)
- Используйте JWT токены
- Добавьте HTTPS
- Валидацию на сервере
- Защиту от XSS и SQL-injection

